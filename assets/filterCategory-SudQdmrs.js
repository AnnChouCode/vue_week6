import{R as f,T as v,_ as g,o as r,c as n,a,n as l,O as d,F as _,r as p,t as h,I as y,m as P,L,U as C}from"./index-xbpPkRUb.js";import{s as k}from"./sweetalert2.all-9-2Zm3oZ.js";var S={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"annchou",BASE_URL:"/vue_week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:x,VITE_PATH:$}=S,u=f("allProductsStore",{state:()=>({allProducts:[],categoryList:[]}),actions:{getAllProducts(){const s=`${x}/api/${$}/products/all`;v.get(s).then(t=>{this.allProducts=t.data.products,this.getCategoryList()}).catch(t=>{k.fire({icon:"error",text:t.response.data.message})})},getCategoryList(){const s=new Set(this.allProducts.map(t=>t.category));this.categoryList=[...s]}}}),A={props:["pagination"],methods:{getProductList(s){this.$emit("getProductList",s)}}},E={"aria-label":"Page navigation",class:"d-flex justify-content-end"},I={class:"pagination"},T=a("span",{"aria-hidden":"true"},"«",-1),V=[T],b=["onClick"],w=a("span",{"aria-hidden":"true"},"»",-1),D=[w];function B(s,t,o,m,c,i){return r(),n("nav",E,[a("ul",I,[a("li",{class:l(["page-item",{disabled:!o.pagination.has_pre}])},[a("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=d(e=>i.getProductList(o.pagination.current_page-1),["prevent"]))},V)],2),(r(!0),n(_,null,p(o.pagination.total_pages,e=>(r(),n("li",{class:l(["page-item",{active:e===o.pagination.current_page}]),key:e},[a("a",{href:"#",class:"page-link",onClick:d(H=>i.getProductList(e),["prevent"])},h(e),9,b)],2))),128)),a("li",{class:l(["page-item",{disabled:!o.pagination.has_next}])},[a("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=d(e=>i.getProductList(o.pagination.current_page+1),["prevent"]))},D)],2)])])}const z=g(A,[["render",B]]),R={data(){return{currentCategory:""}},watch:{currentCategory(){this.$emit("getProductList",1,this.currentCategory)}},methods:{...y(u,["getAllProducts"])},computed:{...P(u,["allProducts","categoryList"])}},M=a("label",{for:"category",class:"me-3"},"產品分類篩選",-1),O=a("option",{value:""},"全部",-1),U=["value"];function F(s,t,o,m,c,i){return r(),n("div",null,[M,L(a("select",{name:"category",id:"category","onUpdate:modelValue":t[0]||(t[0]=e=>c.currentCategory=e)},[O,(r(!0),n(_,null,p(s.categoryList,e=>(r(),n("option",{value:e,key:e},h(e),9,U))),128))],512),[[C,c.currentCategory]])])}const q=g(R,[["render",F]]);export{u as a,q as f,z as p};
