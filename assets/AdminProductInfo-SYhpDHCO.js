import{u as Ct}from"./adminLoginStore-UbgIElSH.js";import{K as Mt,L as Ot,W as U,X as Vt,_ as xt,o as N,c as k,a,Q as dt,M as J,R as ft,V as ht,d as z,h as Lt,F as tt,r as pt,e as M,w as gt,n as W,t as Ut,Y as Rt,g as $t}from"./index-OjM1QzHf.js";import{s as qt}from"./sweetalert2.all-Vzh4P7VD.js";var Bt={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"annchou",BASE_URL:"/vue_week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:Ft,VITE_PATH:Kt}=Bt,Nt=Mt("adminProducts",{state:()=>({allProducts:[],categoryList:[]}),actions:{getAllProducts(){const h=`${Ft}/api/${Kt}/admin/products/all`;return Ot.get(h).then(r=>(this.allProducts=r.data.products,this.getCategoryList(),console.log("productStore 拿到產品資料了"),r)).catch(r=>{qt.fire({icon:"error",text:r.response.data.message})})},getCategoryList(){const h=Object.values(this.allProducts),r=new Set(h.map(s=>s.category));this.categoryList=[...r]}}});var kt={exports:{}},et={exports:{}},ot={exports:{}};/*!
  * Bootstrap data.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var _t;function Yt(){return _t||(_t=1,function(h,r){(function(s,l){h.exports=l()})(U,function(){const s=new Map;return{set(i,o,e){s.has(i)||s.set(i,new Map);const n=s.get(i);if(!n.has(o)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(o,e)},get(i,o){return s.has(i)&&s.get(i).get(o)||null},remove(i,o){if(!s.has(i))return;const e=s.get(i);e.delete(o),e.size===0&&s.delete(i)}}})}(ot)),ot.exports}var st={exports:{}},Q={exports:{}};/*!
  * Bootstrap index.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var bt;function K(){return bt||(bt=1,function(h,r){(function(s,l){l(r)})(U,function(s){const o="transitionend",e=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(d,u)=>`#${CSS.escape(u)}`)),t),n=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),b=t=>{do t+=Math.floor(Math.random()*1e6);while(document.getElementById(t));return t},g=t=>{if(!t)return 0;let{transitionDuration:d,transitionDelay:u}=window.getComputedStyle(t);const w=Number.parseFloat(d),T=Number.parseFloat(u);return!w&&!T?0:(d=d.split(",")[0],u=u.split(",")[0],(Number.parseFloat(d)+Number.parseFloat(u))*1e3)},A=t=>{t.dispatchEvent(new Event(o))},p=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),c=t=>p(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(e(t)):null,_=t=>{if(!p(t)||t.getClientRects().length===0)return!1;const d=getComputedStyle(t).getPropertyValue("visibility")==="visible",u=t.closest("details:not([open])");if(!u)return d;if(u!==t){const w=t.closest("summary");if(w&&w.parentNode!==u||w===null)return!1}return d},S=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",P=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const d=t.getRootNode();return d instanceof ShadowRoot?d:null}return t instanceof ShadowRoot?t:t.parentNode?P(t.parentNode):null},O=()=>{},I=t=>{t.offsetHeight},L=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,V=[],F=t=>{document.readyState==="loading"?(V.length||document.addEventListener("DOMContentLoaded",()=>{for(const d of V)d()}),V.push(t)):t()},Y=()=>document.documentElement.dir==="rtl",m=t=>{F(()=>{const d=L();if(d){const u=t.NAME,w=d.fn[u];d.fn[u]=t.jQueryInterface,d.fn[u].Constructor=t,d.fn[u].noConflict=()=>(d.fn[u]=w,t.jQueryInterface)}})},f=(t,d=[],u=t)=>typeof t=="function"?t(...d):u,E=(t,d,u=!0)=>{if(!u){f(t);return}const T=g(d)+5;let D=!1;const x=({target:q})=>{q===d&&(D=!0,d.removeEventListener(o,x),f(t))};d.addEventListener(o,x),setTimeout(()=>{D||A(d)},T)},y=(t,d,u,w)=>{const T=t.length;let D=t.indexOf(d);return D===-1?!u&&w?t[T-1]:t[0]:(D+=u?1:-1,w&&(D=(D+T)%T),t[Math.max(0,Math.min(D,T-1))])};s.defineJQueryPlugin=m,s.execute=f,s.executeAfterTransition=E,s.findShadowRoot=P,s.getElement=c,s.getNextActiveElement=y,s.getTransitionDurationFromElement=g,s.getUID=b,s.getjQuery=L,s.isDisabled=S,s.isElement=p,s.isRTL=Y,s.isVisible=_,s.noop=O,s.onDOMContentLoaded=F,s.parseSelector=e,s.reflow=I,s.toType=n,s.triggerTransitionEnd=A,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})})}(Q,Q.exports)),Q.exports}/*!
  * Bootstrap event-handler.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var Et;function H(){return Et||(Et=1,function(h,r){(function(s,l){h.exports=l(K())})(U,function(s){const l=/[^.]*(?=\..*)\.|.*/,i=/\..*/,o=/::\d+$/,e={};let n=1;const b={mouseenter:"mouseover",mouseleave:"mouseout"},g=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function A(m,f){return f&&`${f}::${n++}`||m.uidEvent||n++}function p(m){const f=A(m);return m.uidEvent=f,e[f]=e[f]||{},e[f]}function c(m,f){return function E(y){return Y(y,{delegateTarget:m}),E.oneOff&&F.off(m,y.type,f),f.apply(m,[y])}}function _(m,f,E){return function y(t){const d=m.querySelectorAll(f);for(let{target:u}=t;u&&u!==this;u=u.parentNode)for(const w of d)if(w===u)return Y(t,{delegateTarget:u}),y.oneOff&&F.off(m,t.type,f,E),E.apply(u,[t])}}function S(m,f,E=null){return Object.values(m).find(y=>y.callable===f&&y.delegationSelector===E)}function P(m,f,E){const y=typeof f=="string",t=y?E:f||E;let d=V(m);return g.has(d)||(d=m),[y,t,d]}function O(m,f,E,y,t){if(typeof f!="string"||!m)return;let[d,u,w]=P(f,E,y);f in b&&(u=(Z=>function(v){if(!v.relatedTarget||v.relatedTarget!==v.delegateTarget&&!v.delegateTarget.contains(v.relatedTarget))return Z.call(this,v)})(u));const T=p(m),D=T[w]||(T[w]={}),x=S(D,u,d?E:null);if(x){x.oneOff=x.oneOff&&t;return}const q=A(u,f.replace(l,"")),R=d?_(m,E,u):c(m,u);R.delegationSelector=d?E:null,R.callable=u,R.oneOff=t,R.uidEvent=q,D[q]=R,m.addEventListener(w,R,d)}function I(m,f,E,y,t){const d=S(f[E],y,t);d&&(m.removeEventListener(E,d,!!t),delete f[E][d.uidEvent])}function L(m,f,E,y){const t=f[E]||{};for(const[d,u]of Object.entries(t))d.includes(y)&&I(m,f,E,u.callable,u.delegationSelector)}function V(m){return m=m.replace(i,""),b[m]||m}const F={on(m,f,E,y){O(m,f,E,y,!1)},one(m,f,E,y){O(m,f,E,y,!0)},off(m,f,E,y){if(typeof f!="string"||!m)return;const[t,d,u]=P(f,E,y),w=u!==f,T=p(m),D=T[u]||{},x=f.startsWith(".");if(typeof d<"u"){if(!Object.keys(D).length)return;I(m,T,u,d,t?E:null);return}if(x)for(const q of Object.keys(T))L(m,T,q,f.slice(1));for(const[q,R]of Object.entries(D)){const B=q.replace(o,"");(!w||f.includes(B))&&I(m,T,u,R.callable,R.delegationSelector)}},trigger(m,f,E){if(typeof f!="string"||!m)return null;const y=s.getjQuery(),t=V(f),d=f!==t;let u=null,w=!0,T=!0,D=!1;d&&y&&(u=y.Event(f,E),y(m).trigger(u),w=!u.isPropagationStopped(),T=!u.isImmediatePropagationStopped(),D=u.isDefaultPrevented());const x=Y(new Event(f,{bubbles:w,cancelable:!0}),E);return D&&x.preventDefault(),T&&m.dispatchEvent(x),x.defaultPrevented&&u&&u.preventDefault(),x}};function Y(m,f={}){for(const[E,y]of Object.entries(f))try{m[E]=y}catch{Object.defineProperty(m,E,{configurable:!0,get(){return y}})}return m}return F})}(st)),st.exports}var nt={exports:{}},it={exports:{}};/*!
  * Bootstrap manipulator.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var yt;function Pt(){return yt||(yt=1,function(h,r){(function(s,l){h.exports=l()})(U,function(){function s(o){if(o==="true")return!0;if(o==="false")return!1;if(o===Number(o).toString())return Number(o);if(o===""||o==="null")return null;if(typeof o!="string")return o;try{return JSON.parse(decodeURIComponent(o))}catch{return o}}function l(o){return o.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}return{setDataAttribute(o,e,n){o.setAttribute(`data-bs-${l(e)}`,n)},removeDataAttribute(o,e){o.removeAttribute(`data-bs-${l(e)}`)},getDataAttributes(o){if(!o)return{};const e={},n=Object.keys(o.dataset).filter(b=>b.startsWith("bs")&&!b.startsWith("bsConfig"));for(const b of n){let g=b.replace(/^bs/,"");g=g.charAt(0).toLowerCase()+g.slice(1,g.length),e[g]=s(o.dataset[b])}return e},getDataAttribute(o,e){return s(o.getAttribute(`data-bs-${l(e)}`))}}})}(it)),it.exports}/*!
  * Bootstrap config.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var vt;function mt(){return vt||(vt=1,function(h,r){(function(s,l){h.exports=l(Pt(),K())})(U,function(s,l){class i{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const b=l.isElement(n)?s.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof b=="object"?b:{},...l.isElement(n)?s.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[b,g]of Object.entries(n)){const A=e[b],p=l.isElement(A)?"element":l.toType(A);if(!new RegExp(g).test(p))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${b}" provided type "${p}" but expected type "${g}".`)}}}return i})}(nt)),nt.exports}/*!
  * Bootstrap base-component.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var At;function Wt(){return At||(At=1,function(h,r){(function(s,l){h.exports=l(Yt(),H(),mt(),K())})(U,function(s,l,i,o){const e="5.3.2";class n extends i{constructor(g,A){super(),g=o.getElement(g),g&&(this._element=g,this._config=this._getConfig(A),s.set(this._element,this.constructor.DATA_KEY,this))}dispose(){s.remove(this._element,this.constructor.DATA_KEY),l.off(this._element,this.constructor.EVENT_KEY);for(const g of Object.getOwnPropertyNames(this))this[g]=null}_queueCallback(g,A,p=!0){o.executeAfterTransition(g,A,p)}_getConfig(g){return g=this._mergeConfigObj(g,this._element),g=this._configAfterMerge(g),this._typeCheckConfig(g),g}static getInstance(g){return s.get(o.getElement(g),this.DATA_KEY)}static getOrCreateInstance(g,A={}){return this.getInstance(g)||new this(g,typeof A=="object"?A:null)}static get VERSION(){return e}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(g){return`${g}${this.EVENT_KEY}`}}return n})}(et)),et.exports}var rt={exports:{}};/*!
  * Bootstrap selector-engine.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var wt;function X(){return wt||(wt=1,function(h,r){(function(s,l){h.exports=l(K())})(U,function(s){const l=o=>{let e=o.getAttribute("data-bs-target");if(!e||e==="#"){let n=o.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?s.parseSelector(n.trim()):null}return e},i={find(o,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,o))},findOne(o,e=document.documentElement){return Element.prototype.querySelector.call(e,o)},children(o,e){return[].concat(...o.children).filter(n=>n.matches(e))},parents(o,e){const n=[];let b=o.parentNode.closest(e);for(;b;)n.push(b),b=b.parentNode.closest(e);return n},prev(o,e){let n=o.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(o,e){let n=o.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(o){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,o).filter(n=>!s.isDisabled(n)&&s.isVisible(n))},getSelectorFromElement(o){const e=l(o);return e&&i.findOne(e)?e:null},getElementFromSelector(o){const e=l(o);return e?i.findOne(e):null},getMultipleElementsFromSelector(o){const e=l(o);return e?i.find(e):[]}};return i})}(rt)),rt.exports}var lt={exports:{}};/*!
  * Bootstrap backdrop.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var It;function jt(){return It||(It=1,function(h,r){(function(s,l){h.exports=l(H(),mt(),K())})(U,function(s,l,i){const o="backdrop",e="fade",n="show",b=`mousedown.bs.${o}`,g={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},A={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class p extends l{constructor(_){super(),this._config=this._getConfig(_),this._isAppended=!1,this._element=null}static get Default(){return g}static get DefaultType(){return A}static get NAME(){return o}show(_){if(!this._config.isVisible){i.execute(_);return}this._append();const S=this._getElement();this._config.isAnimated&&i.reflow(S),S.classList.add(n),this._emulateAnimation(()=>{i.execute(_)})}hide(_){if(!this._config.isVisible){i.execute(_);return}this._getElement().classList.remove(n),this._emulateAnimation(()=>{this.dispose(),i.execute(_)})}dispose(){this._isAppended&&(s.off(this._element,b),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const _=document.createElement("div");_.className=this._config.className,this._config.isAnimated&&_.classList.add(e),this._element=_}return this._element}_configAfterMerge(_){return _.rootElement=i.getElement(_.rootElement),_}_append(){if(this._isAppended)return;const _=this._getElement();this._config.rootElement.append(_),s.on(_,b,()=>{i.execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(_){i.executeAfterTransition(_,this._getElement(),this._config.isAnimated)}}return p})}(lt)),lt.exports}var G={exports:{}};/*!
  * Bootstrap component-functions.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var Tt;function zt(){return Tt||(Tt=1,function(h,r){(function(s,l){l(r,H(),X(),K())})(U,function(s,l,i,o){const e=(n,b="hide")=>{const g=`click.dismiss${n.EVENT_KEY}`,A=n.NAME;l.on(document,g,`[data-bs-dismiss="${A}"]`,function(p){if(["A","AREA"].includes(this.tagName)&&p.preventDefault(),o.isDisabled(this))return;const c=i.getElementFromSelector(this)||this.closest(`.${A}`);n.getOrCreateInstance(c)[b]()})};s.enableDismissTrigger=e,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})})}(G,G.exports)),G.exports}var at={exports:{}};/*!
  * Bootstrap focustrap.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var St;function Ht(){return St||(St=1,function(h,r){(function(s,l){h.exports=l(H(),X(),mt())})(U,function(s,l,i){const o="focustrap",n=".bs.focustrap",b=`focusin${n}`,g=`keydown.tab${n}`,A="Tab",p="forward",c="backward",_={autofocus:!0,trapElement:null},S={autofocus:"boolean",trapElement:"element"};class P extends i{constructor(I){super(),this._config=this._getConfig(I),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return _}static get DefaultType(){return S}static get NAME(){return o}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),s.off(document,n),s.on(document,b,I=>this._handleFocusin(I)),s.on(document,g,I=>this._handleKeydown(I)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,s.off(document,n))}_handleFocusin(I){const{trapElement:L}=this._config;if(I.target===document||I.target===L||L.contains(I.target))return;const V=l.focusableChildren(L);V.length===0?L.focus():this._lastTabNavDirection===c?V[V.length-1].focus():V[0].focus()}_handleKeydown(I){I.key===A&&(this._lastTabNavDirection=I.shiftKey?c:p)}}return P})}(at)),at.exports}var ct={exports:{}};/*!
  * Bootstrap scrollbar.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var Dt;function Qt(){return Dt||(Dt=1,function(h,r){(function(s,l){h.exports=l(Pt(),X(),K())})(U,function(s,l,i){const o=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",e=".sticky-top",n="padding-right",b="margin-right";class g{constructor(){this._element=document.body}getWidth(){const p=document.documentElement.clientWidth;return Math.abs(window.innerWidth-p)}hide(){const p=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,n,c=>c+p),this._setElementAttributes(o,n,c=>c+p),this._setElementAttributes(e,b,c=>c-p)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,n),this._resetElementAttributes(o,n),this._resetElementAttributes(e,b)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(p,c,_){const S=this.getWidth(),P=O=>{if(O!==this._element&&window.innerWidth>O.clientWidth+S)return;this._saveInitialAttribute(O,c);const I=window.getComputedStyle(O).getPropertyValue(c);O.style.setProperty(c,`${_(Number.parseFloat(I))}px`)};this._applyManipulationCallback(p,P)}_saveInitialAttribute(p,c){const _=p.style.getPropertyValue(c);_&&s.setDataAttribute(p,c,_)}_resetElementAttributes(p,c){const _=S=>{const P=s.getDataAttribute(S,c);if(P===null){S.style.removeProperty(c);return}s.removeDataAttribute(S,c),S.style.setProperty(c,P)};this._applyManipulationCallback(p,_)}_applyManipulationCallback(p,c){if(i.isElement(p)){c(p);return}for(const _ of l.find(p,this._element))c(_)}}return g})}(ct)),ct.exports}/*!
  * Bootstrap modal.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(h,r){(function(s,l){h.exports=l(Wt(),H(),X(),jt(),zt(),Ht(),K(),Qt())})(U,function(s,l,i,o,e,n,b,g){const A="modal",c=".bs.modal",_=".data-api",S="Escape",P=`hide${c}`,O=`hidePrevented${c}`,I=`hidden${c}`,L=`show${c}`,V=`shown${c}`,F=`resize${c}`,Y=`click.dismiss${c}`,m=`mousedown.dismiss${c}`,f=`keydown.dismiss${c}`,E=`click${c}${_}`,y="modal-open",t="fade",d="show",u="modal-static",w=".modal.show",T=".modal-dialog",D=".modal-body",x='[data-bs-toggle="modal"]',q={backdrop:!0,focus:!0,keyboard:!0},R={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class B extends s{constructor(v,C){super(v,C),this._dialog=i.findOne(T,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new g,this._addEventListeners()}static get Default(){return q}static get DefaultType(){return R}static get NAME(){return A}toggle(v){return this._isShown?this.hide():this.show(v)}show(v){this._isShown||this._isTransitioning||l.trigger(this._element,L,{relatedTarget:v}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(y),this._adjustDialog(),this._backdrop.show(()=>this._showElement(v)))}hide(){!this._isShown||this._isTransitioning||l.trigger(this._element,P).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(d),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){l.off(window,c),l.off(this._dialog,c),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new o({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new n({trapElement:this._element})}_showElement(v){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const C=i.findOne(D,this._dialog);C&&(C.scrollTop=0),b.reflow(this._element),this._element.classList.add(d);const $=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,l.trigger(this._element,V,{relatedTarget:v})};this._queueCallback($,this._dialog,this._isAnimated())}_addEventListeners(){l.on(this._element,f,v=>{if(v.key===S){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),l.on(window,F,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),l.on(this._element,m,v=>{l.one(this._element,Y,C=>{if(!(this._element!==v.target||this._element!==C.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(y),this._resetAdjustments(),this._scrollBar.reset(),l.trigger(this._element,I)})}_isAnimated(){return this._element.classList.contains(t)}_triggerBackdropTransition(){if(l.trigger(this._element,O).defaultPrevented)return;const C=this._element.scrollHeight>document.documentElement.clientHeight,$=this._element.style.overflowY;$==="hidden"||this._element.classList.contains(u)||(C||(this._element.style.overflowY="hidden"),this._element.classList.add(u),this._queueCallback(()=>{this._element.classList.remove(u),this._queueCallback(()=>{this._element.style.overflowY=$},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const v=this._element.scrollHeight>document.documentElement.clientHeight,C=this._scrollBar.getWidth(),$=C>0;if($&&!v){const j=b.isRTL()?"paddingLeft":"paddingRight";this._element.style[j]=`${C}px`}if(!$&&v){const j=b.isRTL()?"paddingRight":"paddingLeft";this._element.style[j]=`${C}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(v,C){return this.each(function(){const $=B.getOrCreateInstance(this,v);if(typeof v=="string"){if(typeof $[v]>"u")throw new TypeError(`No method named "${v}"`);$[v](C)}})}}return l.on(document,E,x,function(Z){const v=i.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&Z.preventDefault(),l.one(v,L,j=>{j.defaultPrevented||l.one(v,I,()=>{b.isVisible(this)&&this.focus()})});const C=i.findOne(w);C&&B.getInstance(C).hide(),B.getOrCreateInstance(v).toggle(this)}),e.enableDismissTrigger(B),b.defineJQueryPlugin(B),B})})(kt);var Gt=kt.exports;const Jt=Vt(Gt);var Xt={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"annchou",BASE_URL:"/vue_week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:Zt,VITE_PATH:te}=Xt,ee={props:["isCover"],data(){return{modal:null,dropArea:null,accept:["jpg","jpeg","png"],imgUrl:""}},methods:{openModal(){this.modal.show()},closeModal(){this.modal.hide()},handleFile(h){const r=h.target.files[0];if(console.log(r),r.size/(1024*1024)>3)return this.$swal.fire({icon:"error",text:"請上傳 3MB 以內的圖檔"}),this.resetDropArea(),!1;const i=r.type.split("/")[1];if(!this.accept.find(e=>e===i))return this.$swal.fire({icon:"error",text:"僅限使用 jpg、jpeg 與 png 格式圖檔"}),this.resetDropArea(),!1;this.uploadImage(r)},uploadImage(h){const r=this.$loading.show(),s=new FormData;s.append("file-to-upload",h),this.axios.post(`${Zt}/api/${te}/admin/upload`,s).then(l=>{this.imgUrl=l.data.imageUrl}).catch(l=>{console.log(l),this.$swal.fire({icon:"error",text:l.response})}).finally(()=>{r.hide()})},resetDropArea(){this.dropArea.value=""},submitImgUrl(){this.isCover?this.$emit("submitImgUrl","imageUrl",this.imgUrl):this.$emit("submitImgUrl","imagesUrl",this.imgUrl),this.closeModal()}},mounted(){this.modal=new Jt(this.$refs.uploadImageModal,{keyboard:!1,backdrop:"static"}),this.dropArea=this.$refs.dropArea}},oe={ref:"uploadImageModal",class:"modal fade","aria-hidden":"true","aria-labelledby":"uploadImageModal",tabindex:"-1"},se={class:"modal-dialog modal-lg modal-dialog-centered"},ne={class:"modal-content"},ie={class:"modal-header"},re={key:0,class:"modal-title text-bold fw-bold"},le={key:1,class:"modal-title text-bold fw-bold"},ae=a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),ce={class:"modal-body container"},ue={class:"row g-3"},de={class:"col-12 col-md-4"},fe={class:"drop-area ratio-1x1"},me={key:1},he={class:"col-12 col-md-8"},pe=a("p",{class:"mb-1"},"僅限使用 jpg、jpeg 與 png 格式，檔案大小限制為 3MB 以下",-1),ge=["accept"],_e={class:"modal-footer"};function be(h,r,s,l,i,o){return N(),k("div",oe,[a("div",se,[a("div",ne,[a("div",ie,[s.isCover?(N(),k("h5",re,"上傳封面")):(N(),k("h5",le,"上傳圖片")),ae]),a("div",ce,[a("div",ue,[a("div",de,[a("div",fe,[i.imgUrl?(N(),k("div",{key:0,style:dt(`background-image:url(${i.imgUrl})`),class:"w-100 h-100 bg-img-contain bg-img-center bg-img-norepeat"},null,4)):(N(),k("p",me,"圖片預覽"))])]),a("div",he,[pe,J(a("input",{class:"form-control mb-1",type:"text",placeholder:"請填入圖片網址","onUpdate:modelValue":r[0]||(r[0]=e=>i.imgUrl=e)},null,512),[[ft,i.imgUrl]]),a("input",{class:"form-control",type:"file",ref:"dropArea",accept:i.accept,onChange:r[1]||(r[1]=(...e)=>o.handleFile&&o.handleFile(...e))},null,40,ge)])])]),a("div",_e,[a("button",{type:"button",class:"btn btn-dark",onClick:r[2]||(r[2]=(...e)=>o.submitImgUrl&&o.submitImgUrl(...e))},"送出")])])])],512)}const Ee=xt(ee,[["render",be]]);var ye={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"annchou",BASE_URL:"/vue_week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ve=Ct(),ut=Nt(),{VITE_API:Ae,VITE_PATH:we}=ye,Ie={data(){return{isNewProduct:!1,tempProductInfo:{},tempCategoryList:[],isCover:!1}},methods:{getProductInfo(h,r){this.tempProductInfo=h[r],console.log("productInfo 的 getProductInfo",this.tempProductInfo)},chooseCategory(h){this.tempProductInfo.category=h},deleteImage(h,r){h==="imageUrl"?this.tempProductInfo.imageUrl="":h==="imagesUrl"?this.tempProductInfo.imagesUrl.splice(r,1):(this.tempProductInfo.imageUrl="",this.tempProductInfo.imagesUrl=[])},openImageModal(h){h==="isCover"?this.isCover=!0:this.isCover=!1,this.$refs.uploadImageModal.openModal()},getImgUrl(h,r){if(h==="imageUrl"){this.tempProductInfo.imageUrl=r;return}this.tempProductInfo.imagesUrl?this.tempProductInfo.imagesUrl.push(r):this.tempProductInfo.imagesUrl=[r]},updateProductInfo(){let h=`${Ae}/api/${we}/admin/product`;const r=this.isNewProduct?"post":"put";this.isNewProduct||(h+=`/${this.tempProductInfo.id}`),this.axios[r](h,{data:this.tempProductInfo}).then(s=>{this.$swal.fire(s.data.message),this.$router.push("/admin/products")}).catch(s=>{this.$swal.fire(s.response.data.message)})},async fetchData(){try{await ve.checkLogin(),console.log("productInfo 確認登入");const h=await ut.getAllProducts();console.log("productInfo 拿到 productStore 給的資料了",h),this.tempCategoryList=[...ut.categoryList];const r=this.$route.params.id;if(!r){this.isNewProduct=!0;return}this.getProductInfo(ut.allProducts,r)}catch(h){console.log(h.response.data.message)}}},computed:{...ht(Ct),...ht(Nt)},components:{uploadImageModal:Ee},mounted(){console.log("ProductInfo 的 mounted，即將執行確認登入"),this.fetchData()}},Te={class:"container overflow-y-scroll scrollbar-y-hide vh-100"},Se={key:0,class:"py-5 h2 fw-bold"},De={key:1,class:"py-5 h2 fw-bold"},Ce={class:"mb-5"},xe=a("h5",{class:"mb-3 h5 fw-bold"},"商品圖片",-1),Ne={class:"row g-1 mb-3"},ke={class:"col-6 col-md-2"},Pe={class:"ratio-1x1"},Me={class:"position-relative border border-1 h-100"},Oe=a("i",{class:"bi bi-trash"},null,-1),Ve=[Oe],Le=a("div",{class:"position-absolute bottom-0 py-1 text-center text-white bg-dark opacity-75 w-100"}," 封面圖片 ",-1),Ue={key:2,class:"h-100"},Re=a("i",{class:"bi bi-image mb-2"},null,-1),$e=a("p",null,"目前無封面",-1),qe=[Re,$e],Be={class:"position-relative border border-1 h-100"},Fe=["onClick"],Ke=a("i",{class:"bi bi-trash"},null,-1),Ye=[Ke],We={class:"col-6 col-md-2 p-0 border border-1"},je=a("i",{class:"bi bi-trash me-2"},null,-1),ze=a("span",null,"刪除所有圖片",-1),He=[je,ze],Qe=a("h5",{class:"mb-3 h5 fw-bold"},"商品基本資訊",-1),Ge={"d-flex":""},Je=a("label",{for:"title",class:"form-label fw-bold has-required"},"商品名稱",-1),Xe={class:"row"},Ze={class:"col-md-6"},to=a("label",{for:"quantity",class:"me-2 form-label fw-bold"},"商品數量",-1),eo=a("small",null,"若未填寫則不限數量",-1),oo={class:"col-md-6"},so=a("label",{for:"unit",class:"form-label fw-bold has-required"},"商品單位",-1),no=a("label",{for:"category",class:"form-label fw-bold has-required"},"商品分類",-1),io={class:"d-flex align-items-center text-nowrap"},ro=a("span",null,"點擊帶入分類：",-1),lo={class:"d-flex gap-1 mb-0 flex-wrap"},ao=["onClick"],co={class:"row"},uo={class:"col-md-6"},fo=a("label",{for:"origin_price",class:"form-label fw-bold has-required"},"原價",-1),mo={class:"col-md-6"},ho=a("label",{for:"price",class:"form-label fw-bold has-required"},"售價",-1),po=a("label",{for:"description",class:"form-label fw-bold"},"商品描述",-1),go=a("label",{for:"content",class:"form-label fw-bold"},"說明內容",-1),_o={class:"form-check form-switch"},bo=a("label",{class:"form-check-label",for:"is_enabled"},"是否啟用商品",-1),Eo={class:"d-flex justify-content-end gap-2 pt-3"},yo=a("button",{type:"submit",class:"btn btn-dark text-white"},"確認",-1);function vo(h,r,s,l,i,o){const e=z("v-field"),n=z("error-message"),b=z("router-link"),g=z("v-form"),A=z("uploadImageModal");return N(),k(tt,null,[a("div",Te,[i.isNewProduct?(N(),k("h2",Se,"新增商品")):(N(),k("h2",De,"編輯商品")),a("div",null,[a("div",Ce,[xe,a("div",Ne,[a("div",ke,[a("div",Pe,[a("div",Me,[i.tempProductInfo.imageUrl?(N(),k("button",{key:0,type:"button",class:"position-absolute top-0 end-0 d-flex justify-content-center align-items-center mt-2 me-2 btn btn-light",style:{width:"36px",height:"36px"},onClick:r[0]||(r[0]=p=>o.deleteImage("imageUrl",h.idx))},Ve)):Lt("",!0),Le,i.tempProductInfo.imageUrl?(N(),k("div",{key:1,style:dt(`background-image:url(${i.tempProductInfo.imageUrl})`),class:"h-100 bg-img-contain bg-img-center bg-img-norepeat"},null,4)):(N(),k("div",Ue,[a("button",{onClick:r[1]||(r[1]=p=>o.openImageModal("isCover")),class:"d-flex flex-column align-items-center justify-content-center w-100 h-100 text-secondary btn btn-light rounded-0",type:"button"},qe)]))])])]),(N(!0),k(tt,null,pt(i.tempProductInfo.imagesUrl,(p,c)=>(N(),k("div",{class:"col-6 col-md-2",key:c},[a("div",Be,[a("button",{type:"button",class:"position-absolute top-0 end-0 d-flex justify-content-center align-items-center mt-2 me-2 btn btn-light",style:{width:"36px",height:"36px"},onClick:_=>o.deleteImage("imagesUrl",c)},Ye,8,Fe),a("div",{style:dt(`background-image:url(${p})`),class:"h-100 bg-img-contain bg-img-center bg-img-norepeat"},null,4)])]))),128)),a("div",We,[a("button",{onClick:r[2]||(r[2]=p=>o.openImageModal("inNotCover")),class:"d-flex align-items-center justify-content-center w-100 h-100 text-secondary btn btn-light rounded-0",type:"button"}," 新增圖片 ")])]),a("button",{typs:"button",class:"p-0 btn text-danger",onClick:r[3]||(r[3]=(...p)=>o.deleteImage&&o.deleteImage(...p))},He)]),a("div",null,[Qe,M(g,{class:"d-flex flex-column gap-3",onSubmit:o.updateProductInfo},{default:gt(({errors:p})=>[a("div",Ge,[Je,M(e,{type:"text",class:W(["form-control",{"is-invalid":p.title}]),placeholder:"請輸入商品名稱",modelValue:i.tempProductInfo.title,"onUpdate:modelValue":r[4]||(r[4]=c=>i.tempProductInfo.title=c),id:"title",name:"title",rules:"required"},null,8,["modelValue","class"]),M(n,{name:"title",class:"invalid-feedback"})]),a("div",Xe,[a("div",Ze,[to,eo,M(e,{id:"quantity",name:"quantity",type:"number",class:W(["form-control",{"is-invalid":p.quantity}]),placeholder:"請輸入商品數量",modelValue:i.tempProductInfo.num,"onUpdate:modelValue":r[5]||(r[5]=c=>i.tempProductInfo.num=c),modelModifiers:{number:!0}},null,8,["class","modelValue"])]),a("div",oo,[so,M(e,{id:"unit",name:"unit",type:"text",class:W(["form-control",{"is-invalid":p.unit}]),placeholder:"請輸入商品單位",rules:"required",modelValue:i.tempProductInfo.unit,"onUpdate:modelValue":r[6]||(r[6]=c=>i.tempProductInfo.unit=c)},null,8,["class","modelValue"]),M(n,{name:"unit",class:"invalid-feedback"})])]),a("div",null,[a("div",null,[no,M(e,{type:"text",id:"category",name:"category",class:W(["form-control mb-1",{"is-invalid":p.category}]),placeholder:"請輸入商品分類",rules:"required",modelValue:i.tempProductInfo.category,"onUpdate:modelValue":r[7]||(r[7]=c=>i.tempProductInfo.category=c)},null,8,["class","modelValue"]),M(n,{name:"category",class:"invalid-feedback"})]),a("div",io,[ro,a("div",lo,[(N(!0),k(tt,null,pt(i.tempCategoryList,(c,_)=>(N(),k("button",{type:"button",class:"btn btn-light rounded-pill py-1",value:"item",key:_,onClick:S=>o.chooseCategory(c)},Ut(c),9,ao))),128))])])]),a("div",co,[a("div",uo,[fo,M(e,{type:"number",id:"origin_price",name:"origin_price",class:W(["form-control",{"is-invalid":p.origin_price}]),placeholder:"請輸入原價",rules:"required",modelValue:i.tempProductInfo.origin_price,"onUpdate:modelValue":r[8]||(r[8]=c=>i.tempProductInfo.origin_price=c),modelModifiers:{number:!0}},null,8,["class","modelValue"]),M(n,{name:"origin_price",class:"invalid-feedback"})]),a("div",mo,[ho,M(e,{type:"number",id:"price",name:"price",class:W(["form-control",{"is-invalid":p.price}]),placeholder:"請輸入商品售價",rules:"required",modelValue:i.tempProductInfo.price,"onUpdate:modelValue":r[9]||(r[9]=c=>i.tempProductInfo.price=c),modelModifiers:{number:!0}},null,8,["class","modelValue"]),M(n,{name:"price",class:"invalid-feedback"})])]),a("div",null,[po,J(a("textarea",{type:"text",id:"description",class:"form-control",placeholder:"請輸入商品描述","onUpdate:modelValue":r[10]||(r[10]=c=>i.tempProductInfo.description=c)},null,512),[[ft,i.tempProductInfo.description]])]),a("div",null,[go,J(a("textarea",{type:"text",id:"content",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":r[11]||(r[11]=c=>i.tempProductInfo.content=c)},null,512),[[ft,i.tempProductInfo.content]])]),a("div",_o,[J(a("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"is_enabled",checked:"","onUpdate:modelValue":r[12]||(r[12]=c=>i.tempProductInfo.is_enabled=c)},null,512),[[Rt,i.tempProductInfo.is_enabled]]),bo]),a("div",Eo,[M(b,{to:"/admin/products",class:"btn btn-outline-dark"},{default:gt(()=>[$t("取消")]),_:1}),yo])]),_:1},8,["onSubmit"])])])]),M(A,{ref:"uploadImageModal",onSubmitImgUrl:o.getImgUrl,"is-Cover":i.isCover},null,8,["onSubmitImgUrl","is-Cover"])],64)}const To=xt(Ie,[["render",vo]]);export{To as default};
