import{p as x}from"./paginationComponent-7RtH4obs.js";import{_ as k,b as u,o as c,c as r,a as t,F as v,r as y,d as h,O as $,t as d,w as P,n as _}from"./index-wNkprf1Q.js";var w={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"annchou",BASE_URL:"/vue_week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:p,VITE_PATH:g}=w,C={data(){return{productsList:[],pagination:{}}},methods:{getProductList(n=1,i){let a=`${p}/api/${g}/admin/products?page=${n}`;i&&(a+=`&category=${i}`),this.axios.get(a).then(o=>{const{products:s,pagination:l}=o.data;this.productsList=s,this.pagination=l}).catch(o=>{this.$swal.fire({icon:"error",text:o.response.data.message})})},showProductInfo(n){this.$router.push(`/admin/productinfo/${n}`)},deleteProduct(n){const i=`${p}/api/${g}/admin/product/${n}`;this.$swal.fire({title:"確定要刪除產品嗎？",text:"這個動作無法復原",icon:"question",showCancelButton:!0,confirmButtonColor:"#000000",cancelButtonColor:"gray",confirmButtonText:"OK"}).then(a=>{if(a.isConfirmed){const o=this.$loading.show();this.axios.delete(i).then(s=>{this.$swal.fire(s.data.message),this.getProductList()}).catch(s=>{this.$swal.fire({icon:"error",text:s.response.data.message})}).finally(()=>{o.hide()})}})}},mounted(){this.getProductList()},components:{paginationComponent:x}},L={class:"container overflow-y-scroll scrollbar-y-hide vh-100"},I=t("div",{class:"d-flex justify-content-between py-5"},[t("h2",{class:"h2"},"產品列表"),t("button",{class:"btn btn-dark text-white"},"建立新的產品")],-1),B={class:"table align-middle"},E=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",{class:"text-center"},"分類"),t("th",{class:"text-center"},"原價 / 售價"),t("th",null,"狀態"),t("th")])],-1),T={style:{width:"200px"}},V={class:"py-1 rounded-pill bg-light text-center"},A={class:"h5 text-center"},S={key:0,class:"text-success"},D={key:1,class:"text-danger"},O={class:"btn-group align-items-center"},z=["onClick"],R=t("i",{class:"bi bi-pencil text-success"},null,-1),F=[R],G=["onClick"],H=t("i",{class:"bi bi-trash text-danger"},null,-1),N=[H];function U(n,i,a,o,s,l){const m=u("router-link"),b=u("paginationComponent");return c(),r("div",L,[I,t("div",null,[t("table",B,[E,t("tbody",null,[(c(!0),r(v,null,y(s.productsList,e=>(c(),r("tr",{key:e.id},[t("td",T,[t("div",{style:$([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",null,d(e.title),1),t("td",null,[t("div",V,d(e.category),1)]),t("td",null,[t("div",A,d(e.origin_price)+" / "+d(e.price),1)]),t("td",null,[e.is_enabled?(c(),r("p",S,"啟用")):(c(),r("p",D,"未啟用"))]),t("td",null,[t("div",O,[t("button",{type:"button",class:"btn",onClick:f=>l.showProductInfo(e.id)},F,8,z),t("button",{type:"button",class:"btn",onClick:f=>l.deleteProduct(e.id)},N,8,G),h(m,{class:_(["btn",{"pe-none":!e.is_enabled}]),target:"_blank",to:`/productinfo/${e.id}`},{default:P(()=>[t("i",{class:_(["bi bi-house",e.is_enabled?"text-dark":"text-light"])},null,2)]),_:2},1032,["to","class"])])])]))),128))])]),h(b,{pagination:s.pagination,onGetProductList:l.getProductList},null,8,["pagination","onGetProductList"])])])}const K=k(C,[["render",U]]);export{K as default};
