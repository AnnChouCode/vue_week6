import{u as b}from"./adminLoginStore-UbgIElSH.js";import{_ as v,V as k,d as _,o as c,c as r,a as t,e as u,w as p,F as w,r as L,g as P,Q as $,t as d,n as g}from"./index-OjM1QzHf.js";import{p as C}from"./paginationComponent-b0O6B2DG.js";import"./sweetalert2.all-Vzh4P7VD.js";var V={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"annchou",BASE_URL:"/vue_week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const A=b(),{VITE_API:m,VITE_PATH:f}=V,B={data(){return{productsList:[],pagination:{}}},methods:{getProductList(s=1,i){let a=`${m}/api/${f}/admin/products?page=${s}`;i&&(a+=`&category=${i}`),this.axios.get(a).then(n=>{const{products:o,pagination:l}=n.data;this.productsList=o,this.pagination=l}).catch(n=>{this.$swal.fire({icon:"error",text:n.response.data.message})})},showProductPage(s){this.$router.push(`/admin/productinfo/${s}`)},deleteProduct(s){const i=`${m}/api/${f}/admin/product/${s}`;this.$swal.fire({title:"確定要刪除產品嗎？",text:"這個動作無法復原",icon:"question",showCancelButton:!0,confirmButtonColor:"#000000",cancelButtonColor:"gray",confirmButtonText:"OK"}).then(a=>{if(a.isConfirmed){const n=this.$loading.show();this.axios.delete(i).then(o=>{this.$swal.fire(o.data.message),this.getProductList()}).catch(o=>{this.$swal.fire({icon:"error",text:o.response.data.message})}).finally(()=>{n.hide()})}})},async fetchData(){try{await A.checkLogin(),console.log("productList 確認登入"),this.getProductList()}catch(s){console.log(s.response.data.message)}}},computed:{...k(b)},mounted(){console.log("AdminProductList 的 mounted，即將執行確認登入"),this.fetchData()},components:{paginationComponent:C}},E={class:"container overflow-y-scroll scrollbar-y-hide vh-100"},S={class:"d-flex justify-content-between py-5"},T=t("h2",{class:"h2 fw-bold"},"產品列表",-1),I={class:"table align-middle"},D=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",{class:"text-center"},"分類"),t("th",{class:"text-center"},"原價 / 售價"),t("th",null,"狀態"),t("th")])],-1),N={style:{width:"200px"}},O={class:"py-1 rounded-pill bg-light text-center"},R={class:"h5 text-center"},z={key:0,class:"text-success"},F={key:1,class:"text-danger"},G={class:"btn-group align-items-center"},H=["onClick"],U=t("i",{class:"bi bi-pencil text-success"},null,-1),j=[U],q=["onClick"],K=t("i",{class:"bi bi-trash text-danger"},null,-1),M=[K];function Q(s,i,a,n,o,l){const h=_("router-link"),x=_("paginationComponent");return c(),r("div",E,[t("div",S,[T,u(h,{to:"/admin/productinfo/new",class:"btn btn-dark"},{default:p(()=>[P("建立新的產品")]),_:1})]),t("div",null,[t("table",I,[D,t("tbody",null,[(c(!0),r(w,null,L(o.productsList,e=>(c(),r("tr",{key:e.id},[t("td",N,[t("div",{class:"bg-img-cover bg-img-center",style:$([{height:"100px"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",null,d(e.title),1),t("td",null,[t("div",O,d(e.category),1)]),t("td",null,[t("div",R,d(e.origin_price)+" / "+d(e.price),1)]),t("td",null,[e.is_enabled?(c(),r("p",z,"啟用")):(c(),r("p",F,"未啟用"))]),t("td",null,[t("div",G,[t("button",{type:"button",class:"btn",onClick:y=>l.showProductPage(e.id)},j,8,H),t("button",{type:"button",class:"btn",onClick:y=>l.deleteProduct(e.id)},M,8,q),u(h,{class:g(["btn",{"pe-none":!e.is_enabled}]),target:"_blank",to:`/productinfo/${e.id}`},{default:p(()=>[t("i",{class:g(["bi bi-house",e.is_enabled?"text-dark":"text-light"])},null,2)]),_:2},1032,["to","class"])])])]))),128))])]),u(x,{pagination:o.pagination,onGetList:l.getProductList},null,8,["pagination","onGetList"])])])}const Z=v(B,[["render",Q]]);export{Z as default};
