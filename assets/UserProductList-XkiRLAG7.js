import{c as f}from"./cartStore-vxvjjiC6.js";import{p as P,f as b,a as v}from"./filterCategory-SudQdmrs.js";import{_ as y,I as u,b as _,o as s,c as i,d as p,a as t,F as L,r as k,J as C,t as c}from"./index-xbpPkRUb.js";import"./sweetalert2.all-9-2Zm3oZ.js";var I={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"annchou",BASE_URL:"/vue_week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:$,VITE_PATH:x}=I,A={data(){return{productsList:[],pagination:{}}},methods:{...u(f,["addToCart"]),...u(v,["getAllProducts"]),getProductList(e=1,l){let d=`${$}/api/${x}/products?page=${e}`;l&&(d+=`&category=${l}`),this.axios.get(d).then(a=>{const{products:r,pagination:n}=a.data;this.productsList=r,this.pagination=n}).catch(a=>{this.$swal.fire({icon:"error",text:a.response.data.message})})},showProductInfo(e){this.$router.push(`/productinfo/${e}`)}},mounted(){this.getProductList(),this.getAllProducts()},components:{paginationComponent:P,filterCategory:b}},E={class:"container"},T=t("h2",{class:"py-5 h2 text-center"},"看產品",-1),S={class:"table align-middle"},V=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),w={style:{width:"200px"}},B={key:0,class:"h5"},D={key:1},G={class:"h6"},R={class:"h5"},U={class:"btn-group btn-group-sm"},z=["onClick"],F=["onClick"];function H(e,l,d,a,r,n){const h=_("filterCategory"),g=_("paginationComponent");return s(),i("div",E,[T,p(h,{onGetProductList:n.getProductList},null,8,["onGetProductList"]),t("table",S,[V,t("tbody",null,[(s(!0),i(L,null,k(r.productsList,o=>(s(),i("tr",{key:o.id},[t("td",w,[t("div",{style:C([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${o.imageUrl})`}])},null,4)]),t("td",null,c(o.title),1),t("td",null,[o.price?(s(),i("div",D,[t("del",G,"原價 "+c(o.origin_price)+" 元",1),t("div",R,"現在只要 "+c(o.price)+" 元",1)])):(s(),i("div",B,c(o.origin_price)+" 元",1))]),t("td",null,[t("div",U,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:m=>n.showProductInfo(o.id)}," 查看更多 ",8,z),t("button",{type:"button",class:"btn btn-outline-danger",onClick:m=>e.addToCart(o.id,1)}," 加到購物車 ",8,F)])])]))),128))])]),p(g,{pagination:r.pagination,onGetProductList:n.getProductList},null,8,["pagination","onGetProductList"])])}const j=y(A,[["render",H]]);export{j as default};
